<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MobileApp.Views.DashboardPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:MobileApp.ViewModels">

    <VerticalStackLayout Padding="20"
                         Spacing="20">

        <Label Text="Фінансовий огляд"
               FontSize="30"
               HorizontalOptions="Center"/>

        <ActivityIndicator IsRunning="{Binding IsBusy}"
                           IsVisible="{Binding IsBusy}"/>

        <!-- Основні картки -->
        <Grid ColumnDefinitions="*,*"
              RowDefinitions="Auto,Auto"
              RowSpacing="10"
              ColumnSpacing="10">

            <Frame Grid.Row="0"
                   Grid.Column="0"
                   BackgroundColor="#4a90e2"
                   CornerRadius="12"
                   Padding="15">
                <VerticalStackLayout>
                    <Label Text="Всього витрат"
                           TextColor="White"/>
                    <Label Text="{Binding TotalSpent}"
                           TextColor="White"
                           FontSize="22"
                           FontAttributes="Bold"/>
                </VerticalStackLayout>
            </Frame>

            <Frame Grid.Row="0"
                   Grid.Column="1"
                   BackgroundColor="#7d50e6"
                   CornerRadius="12"
                   Padding="15">
                <VerticalStackLayout>
                    <Label Text="Сьогодні"
                           TextColor="White"/>
                    <Label Text="{Binding SpentToday}"
                           TextColor="White"
                           FontSize="22"
                           FontAttributes="Bold"/>
                </VerticalStackLayout>
            </Frame>

            <Frame Grid.Row="1"
                   Grid.Column="0"
                   Grid.ColumnSpan="2"
                   BackgroundColor="#e65f4d"
                   CornerRadius="12"
                   Padding="15">
                <VerticalStackLayout>
                    <Label Text="За місяць"
                           TextColor="White"/>
                    <Label Text="{Binding SpentThisMonth}"
                           TextColor="White"
                           FontSize="22"
                           FontAttributes="Bold"/>
                </VerticalStackLayout>
            </Frame>
        </Grid>

        <!-- Останні транзакції -->
        <Label Text="Останні транзакції"
               FontSize="20"/>

        <CollectionView ItemsSource="{Binding RecentTransactions}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <HorizontalStackLayout Padding="8">
                        <Label Text="{Binding Name}"
                               FontSize="16"/>
                        <Label Text="{Binding SumAfterTax}"
                               FontSize="16"
                               Margin="10,0,0,0"/>
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Популярні категорії -->
        <Label Text="Популярні категорії"
               FontSize="20"/>

        <HorizontalStackLayout>
            <CollectionView ItemsSource="{Binding TopCategories}"
                            ItemsLayout="HorizontalList">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10"
                               CornerRadius="8"
                               BackgroundColor="#eee"
                               Margin="0,0,10,0">
                            <Label Text="{Binding Name}"/>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </HorizontalStackLayout>

    </VerticalStackLayout>
</ContentPage>
